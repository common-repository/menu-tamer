(function(e,t){var n={init:function(){this.settings.init(),this.setUpToggleElements(),e("#wpbody").on("sortstop","#menu-to-edit",n.refresh)},settings:{menus:[],init:function(){var e=getUserSetting("menuTamerCollapsed").toString(),t,n;if(/^\d+(s\d+)*/.test(e)){e=e.split("s");for(t in e)n=parseInt(e[t]),n&&this.menus.push(n)}},find:function(e){var t;for(t in this.menus)if(this.menus[t]===e)return t;return undefined},exists:function(e){return this.find(e)!==undefined},add:function(e){e=parseInt(e),this.exists(e)||this.menus.push(e),this.save()},remove:function(e){e=parseInt(e);var t=this.find(e);if(t===undefined)return;delete this.menus[t],this.save()},save:function(){var e=this.menus.join("s");setUserSetting("menuTamerCollapsed",e)}},refresh:function(){setTimeout(function(){n.setUpToggleElements.call(n)},50)},setUpToggleElements:function(){e(".menuTamerToggle").each(function(e,t){n.setUpToggleElement(t)})},setUpToggleElement:function(t){t=e(t),t.data("menu-tamer-setup")||(t.click(this.handleClick),this.settings.exists(this.getMenuItemId(t))&&(t.data("menu-tamer-collapsed",!0),this.getMenuItem(t).childMenuItems().hide())),this.setText(t),this.getMenuItem(t).childMenuItems().length?t.removeClass("hidden").addClass("menuTamerActive"):t.removeClass("menuTamerActive").addClass("hidden"),t.data("menu-tamer-setup",!0)},isCollapsed:function(t){return!!e(t).data("menu-tamer-collapsed")},getMenuItemId:function(e){var t=this.getMenuItem(e).attr("id").replace("menu-item-","");return parseInt(t)},setState:function(t){t=e(t);var n=!e(t).data("menu-tamer-collapsed");n?this.settings.add(this.getMenuItemId(t)):this.settings.remove(this.getMenuItemId(t)),t.data("menu-tamer-collapsed",n)},setText:function(n){var r=this.isCollapsed(n)?t.expand:t.collapse;e(n).text(r)},getMenuItem:function(t){return e(t).closest(".menu-item")},handleClick:function(e){e.preventDefault();var t=this,r=n.getMenuItem(t),i=r.childMenuItems();n.isCollapsed(t)?(i.find(".menuTamerActive").each(function(e,t){n.isCollapsed(t)&&(i=i.not(n.getMenuItem(t).childMenuItems()))}),i.slideDown("fast")):i.slideUp("fast"),n.setState(t),n.setText(t)}};e(document).ready(function(){n.init()})})(jQuery,MenuTamerL10n);